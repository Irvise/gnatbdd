<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The test driver &mdash; GNAT Behavior Driven Development 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/adacore.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="GNAT Behavior Driven Development 1.0 documentation" href="index.html" />
    <link rel="next" title="Controlling the output" href="output.html" />
    <link rel="prev" title="Steps definitions" href="steps.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="output.html" title="Controlling the output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="steps.html" title="Steps definitions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GNAT Behavior Driven Development 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/adacore_transparent.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The test driver</a><ul>
<li><a class="reference internal" href="#finding-features">Finding features</a></li>
<li><a class="reference internal" href="#running-feature">Running feature</a></li>
<li><a class="reference internal" href="#step-timeout">Step timeout</a></li>
<li><a class="reference internal" href="#running-tests-in-parallel">Running tests in parallel</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="steps.html"
                        title="previous chapter">Steps definitions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="output.html"
                        title="next chapter">Controlling the output</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/driver.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-test-driver">
<h1>The test driver<a class="headerlink" href="#the-test-driver" title="Permalink to this headline">¶</a></h1>
<p>The test driver is the executable generated by GNATbdd. In fact, there could
be several drivers built, depending on how you chose to run GNATbdd. For
instance, one of the driver might stub part of your application, whereas
another driver would test that same part and stub another part.</p>
<div class="section" id="finding-features">
<h2>Finding features<a class="headerlink" href="#finding-features" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s first examine how the driver finds all the features for your application.</p>
<p id="index-0">Typically, the features are written in text files with a <code class="file docutils literal"><span class="pre">.feature</span></code>
extension. Several editors will automatically provide syntax highlighting with
such an extension. However, you can choose your own extension by using the
<code class="xref std std-option docutils literal"><span class="pre">--ext</span> <span class="pre">.EXT</span></code> switch when you run the driver.</p>
<p id="index-1">By default, the driver will find all the files with a matching extension in
a subdirectory names <code class="file docutils literal"><span class="pre">features</span></code>, within the directory where the driver
is run. You can however specify one or more other directories to check,
by using the <code class="xref std std-option docutils literal"><span class="pre">--features</span> <span class="pre">DIR</span></code> switch one or more times.</p>
<p>The driver will always search recursively in those directories. This lets you
organize the files into subdirectories when you have several of them, and
thus perhaps make it easier to refer to them.</p>
<p>The driver will run the features file in alphabetical order of the full path of
the feature file, by default. This provides a more consistent output when
the driver is run multiple times.</p>
<p id="index-2">However, by using the <code class="xref std std-option docutils literal"><span class="pre">--random</span></code> switch, the order of features is
randomized. This is a convenient way to check that the various tests are indeed
independent of each other, as they should be to make it possible to run tests
individually.</p>
</div>
<div class="section" id="running-feature">
<h2>Running feature<a class="headerlink" href="#running-feature" title="Permalink to this headline">¶</a></h2>
<p id="index-3">When you run the driver, you can use the switch <code class="xref std std-option docutils literal"><span class="pre">--tags</span></code> to control
which scenarios should be run. For instance, all scenarios related to <a class="reference external" href="mailto:'&#37;&#52;&#48;gui">'<span>&#64;</span>gui</a>&#8216;,
or all scenarios not related to <a class="reference external" href="mailto:'&#37;&#52;&#48;startup">'<span>&#64;</span>startup</a>&#8216;. You can of course select subsets of
scenarios based on the file names, but tags provide a file-system-agnostic
selection mechanism.</p>
</div>
<div class="section" id="step-timeout">
<h2>Step timeout<a class="headerlink" href="#step-timeout" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This will likely require each scenario to be run in its own task. There
will be only one such task, so it doesn&#8217;t really add constraints on the
user code or step definitions, but it makes debugging slightly more
difficult.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Perhaps we can also change the way the driver is generated, rather than do
everything dynamically in the driver itself.</p>
</div>
<p id="index-4">You can use the <code class="xref std std-option docutils literal"><span class="pre">--timeout</span></code> switch to specify a maximum time that
steps can take to execute. A test that times out will automatically fail
with an appropriate error message.</p>
</div>
<div class="section" id="running-tests-in-parallel">
<h2>Running tests in parallel<a class="headerlink" href="#running-tests-in-parallel" title="Permalink to this headline">¶</a></h2>
<p>There are multiple modes to run features in parallel. The parallelism is always
between <code class="file docutils literal"><span class="pre">.feature</span></code> file, never between the Scenario of a given file.</p>
<p>When your application is task safe, you can run multiple features in parallel
by running each in its own task (up to a maximum number of tasks of course).</p>
<p>In other cases, the driver can automatically spawn several instances of itself,
each running a single feature in parallel of the others. This is slightly less
efficient, but does not impose task-safety constraints on your application.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="output.html" title="Controlling the output"
             >next</a> |</li>
        <li class="right" >
          <a href="steps.html" title="Steps definitions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GNAT Behavior Driven Development 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013-2016, AdaCore.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>